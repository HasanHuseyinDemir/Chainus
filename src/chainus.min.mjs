let A={w:!0,rF:{},i:-1,oc:0,od:0,open:0},t={f:"function",s:"string",b:"boolean",n:"number",o:"object",u:"undefined",sa:"setAttribute",ga:"getAttribute",apc:"appendChild",fE:"forEach",lc:"toLowerCase",h:"#!?S?!#",t:"<a_></a_>",rA:"replaceAll",U:void 0,nV:"nodeValue"},j={apc(e,s){e[t.apc](s)},rpw(e,s){e.replaceWith(s)},ctN:e=>document.createTextNode(e),frg:()=>document.createDocumentFragment(),dce:e=>document.createElement(e),nm:()=>new Map,wm:()=>new WeakMap,qs:(e,s)=>e.querySelector(s),qsA:(e,s)=>e.querySelectorAll(s),tcC(e){e.textContent=""},ra(e,s){e.removeAttribute(s)},hop:(e,s)=>e.hasOwnProperty(s),iA:e=>Array.isArray(e),S:()=>Symbol(),i:()=>(A.i+=1,`_${A.i}_`),tN:e=>e.tagName[t.lc]()},D=j.nm(),[mS,hS,dS,CDs,SGS]=[j.S(),j.S(),j.S(),j.S(),j.S()],[CM,Elements]=[j.nm(),j.nm()],is=(e,s)=>typeof e==t[s],isTN=e=>e&&3===e.nodeType,sC=(e,s)=>{is(e,"s")&&is(s,"f")?CM.set(e[t.lc](),s):error({i:2,ty:"Component Setting",w:"Please use a string value as the name in the first parameter when specifying a component, and provide a function that creates the element."})},isD=e=>e instanceof Element||e instanceof HTMLElement||e instanceof DocumentFragment,L=e=>(s,r)=>{s[mS]||(s[mS]=HD({lf:{oC:null,oD:null}}));let n=e?"oC":"oD";A[e?"oc":"od"]=1,is(r,"f")&&(s[mS](hS).lf[n]=r)},ctw=e=>document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null,!1),createElement=e=>document.createRange().createContextualFragment(e);function on(e,s,r){let n={};dA(e,n),e.addEventListener(s.substring(2),()=>r(e,n))}function dA(e,s){SP(e,CDs,1)[t.fE](e=>Object.assign(s,e[CDs](hS)))}function nM(e){let s=e,r=s.split("/>").length-1,n=0;for(;r>n;){let i=s.search("/>")-1,l=0,o="";for(;i-l>=-1;){if("<"==s.charAt(i-l)){let a=(o=o.split("").reverse().join("")).split(" ")[0],c=`<${a} ${o.replace(a,"")||""}></${a}>`;s=s.slice(0,i-l)+c+s.slice(i+3,s.length),n++,i="",l=0,o=""}else o+=s.charAt(i-l);l++}}return s}function HD(e){let s={...e};return(e,r)=>(function e(r,n){if(A.open||r===hS)return n&&(s=n),s;error({ty:"Access",i:2,w:"Unable to access data"})})(e,r)}function rP(e){let s=e[t.rA]("<>","<div>")[t.rA]("</>","</div>");return(s=s.includes("/>")?nM(s):s)[t.rA](/\{\.\#\!\}/g,t.t)}function iE(e,s){let r=[...s],n=e.reduce((e,s,n)=>{let i=s,l=r[n];return l!==t.U&&(is(l,"s")||is(l,"n")?(i+=l,r[n]=t.U):i+="{.#!}"),e+i},"");r=r.filter(e=>e!=t.U);let i=createElement(rP(n)).firstElementChild;return kY(i,r,i),i}function html(e,...s){return iE(e,[...s])}function sub(e,s){if(e[mS]){let r=s?"oC":"oD";e[mS]&&is(e[mS](hS).lf[r],"f")&&e[mS](hS).lf[r]()}}function SP(e,s,r){let n=e,i=[];for(;n&&n!==document.body&&n.parentNode;){if(n[s]){if(!r)return n;i.push(n)}n=n.parentNode}return r?i:null}HTMLElement.prototype.ref=function(e,s){let r=j.qsA(this,`[ref='${e}']`);return s&&r[t.fE](e=>j.ra(e,"ref")),Array.from(r).length>1?r:r[0]};let cFg=e=>{let s=j.frg();for(;e.childNodes.length;)j.apc(s,e.firstChild);return s},Mount=(e,s,r)=>{let n=is(s,"f")?s(r):s,i=e=>{e.firstChild!==s&&(j.tcC(e),j.apc(e,n))};is(e,"s")?j.qsA(document,e)[t.fE](e=>{i(e)}):isD(e)?i(e):error()};function async(e,s,r){return async function(n){if(!A.rF[e])try{let i=await import(e);A.rF[e]={},Object.assign(A.rF[e],i)}catch(l){r?r(l):error({ty:"Promise",w:"Cannot reach the asynchronous module\nURL : '"+e+"'",t:"Enter a valid URL",i:2});return}let o=A.rF[e][s||"default"];return is(o,"f")?o(n):o}}function sAp(e,s,r,n,i){let l=e,o=r,a=CM.get(j.tN(e)),c=["fallback","onload","src","default","name","onfail"],[f,u]=[j.frg(),j.frg()],[p,h,m,g,b]=[{},{},{},{},{}];for(;e.childNodes.length;)j.apc(u,e.firstChild);j.qsA(u,"slot[name]:not([name=''])")[t.fE](e=>{let s=e[t.ga]("name");p[s]=cFg(e)}),j.apc(f,u),p.default=f,dA(e,g);let C=e.attributes;Array.from(C).length&&Array.from(C)[t.fE](e=>{let r;if("$"==e.name[0]){e.value==t.t?(r=s[o],o++):r=e.value,m[e.name.substring(1)]=r;return}e.value==t.t?(r=s[o],i&&c[e.name]&&(b[e.name]=r),o++):r=e.value,h[e.name]=r}),n(o);let w;!async function(){let s={props:h,data:g,binds:m,slots:p,slot:p.default},r={},n;if(i){Object.keys(h)[t.fE](e=>{c.includes(e)&&(r[e]=h[e],delete h[e])});let o=r[c[0]],f;o&&(is(o,"s")?f=j.ctN(o):is(o,"f")?f=o(s):isD(o)&&(f=o),j.rpw(l,f),w=f);try{is(r.src,"s")?n=await async(r.src,r.name||"default",r[c[5]])(s):is(r.src,"f")&&(n=await r.src(s))}catch(u){r[c[3]]&&j.rpw(l,r[c[3]](u)),is(r[c[5]],"f")&&r[c[5]](u);return}}else n=is(a,"f")?a(s):a;if(!n){is(r[c[3]],"f")&&j.rpw(w||l,r[c[3]]());return}if(j.qs(n,"slot")&&j.rpw(j.qs(n,"slot"),p.default),j.qsA(n,"[slot]")[t.fE](e=>{j.apc(e,p[e[t.ga]("slot")]),j.ra(e,"slot")}),j.qs(n,"slot"))for(;j.qs(n,"slot");)j.rpw(j.qs(n,"slot"),p.default);Object.keys(m).length&&Object.keys(m)[t.fE](e=>{let s=n;if("on"==e.substring(0,2)){on(s,e,m[e]),s.removeAttribute(e);return}s[e.sa](e,m[e])}),w?j.rpw(w,n):j.rpw(e,n),r[c[1]]&&r[c[1]](n)}()}function error(e){if(A.w){let s=["#5f5","#ff5","#f52","#f31"];console.warn(`%cCHAINUS : ${e.ty} ${0==e.i||void 0==e.i?"Info":1==e.i?"Warning":(e.i>2?"Important ":"")+"Error!"} `,`background-color: ${s[e.i]};color:black ; font-weight: bolder;font-size:14px ; padding: 4px ;${e.i>1?"text-transform:uppercase;":""}`),console.log("%c"+e.w,`color:${s[e.i]};font-weight:bolder`),e.t&&console.log("%c"+e.t,"color:white")}}let cC=[],lC=()=>cC[cC.length-1],sdb={m:j.S(),t:{w:!1,wLs:j.nm()},rec(){sdb.t.w||(sdb.t.w=1),cC.push(j.nm())},stop(){let e=[...Array.from(cC.pop(),([e,s])=>({s:e,o:s}))];return cC.length||(sdb.t.w=0),e},init(e,s){e[dS]=HD(s),e[sdb.m]=!0},is:e=>is(e[dS],"f"),push(e,s){let r=sdb;r.is(e)?j.iA(s)?e[dS](hS,[...e[dS](hS),...s]):j.iA(e[dS](hS))?e[dS](hS,[...e[dS](hS),s]):e[dS](hS,[s]):j.iA(s)?r.init(e,[...s]):r.init(e,[s])},sub(e){sdb.is(e)&&e[dS](hS)[t.fE](e=>{if(e.pre&&this.prp(e),D.has(e.s)){if(!j.iA(D.get(e.s)[e.v])){D.get(e.s)[e.v]=[e];return}}else{D.set(e.s,{}),D.get(e.s)[e.v]=[e];return}D.get(e.s)[e.v].length?D.get(e.s)[e.v].push(e):(D.set(e.s,{}),D.get(e.s)[e.v]=[e])})},unsub(e){sdb.is(e)&&e[dS](hS)[t.fE](s=>{s.pre=!0;let r=D.get(s.s);r[s.v]=r[s.v].filter(s=>s.e!=e),r[s.v].length||delete r[s.v],Object.keys(r).length||D.delete(s.s)})},prep(e,s,r){r.length&&(sdb.init(e,[]),r[t.fE](r=>{r.o[t.fE](n=>{sdb.push(e,{...s,s:r.s,v:n,e})})}))},prp(e){if("s"==e.m){e.c(e.e);return}let s=e.c(e);if(s!==t.U){if("a"==e.m)e.e[t.ga](e.a)!=s&&e.e[t.sa](e.a,s);else if("e"==e.m){if(isTN(e.e)||isD(s))isTN(e.e)&&!isD(s)?e.e[t.nV]!=s&&(e.e[t.nV]=s):isTN(e.e)&&isTN(s)?e.e[t.nV]!=s[t.nV]&&(e.e[t.nV]=s[t.nV]):isTN(e.e)&&isD(s)?(j.rpw(e.e,s),e.e=s):isD(e.e)&&isD(s)&&!e.e.isEqualNode(s)&&(j.rpw(e.e,s),e.e=s);else{let r=j.ctN(s);j.rpw(e.e,r),e.e=r}}}},proc(e,s){D.get(e)&&D.get(e)[s]&&D.get(e)[s][t.fE](e=>{sdb.prp(e)})}};function S(e){let s=j.iA(e),r=j.i(),n=e?s?[...e]:{...e}:{};return Object.entries(n)[t.fE](([e,s])=>{is(s,"o")&&(n[e]=S(s))}),n=new Proxy(n,{get(e,s){if(s==SGS)return r;if(!is(e[s],"o")&&sdb.t.w){var n,i;let l=lC(),o;l.get(r)?(n=l.get(r),i=s,n.includes(i)||n.push(i)):l.set(r,[s])}return e[s]},set(e,n,i){if(e[n]===e.U&&is(i,"o"))return e[n]=S(i),e[n];if(is(e[n],"o")&&is(i,"o"))return delete e[n],e[n]=S(i),e[n];let l=e[n]!==i;return(s||l)&&(e[n]=i,sdb.proc(r,n)),1},deleteProperty:(e,n)=>(s?(e.splice(n,1),sdb.proc(r,"length")):delete e[n],1)})}function state(e){let s=e,r=j.i(),n;function i(){if(sdb.t.w){var e,n;let i=lC(),l;i.get(r)?(e=i.get(r),n="*",e.includes(n)||e.push(n)):i.set(r,["*"])}return s}return i.id=r,i.callback=e=>{is(e,"f")?n=e:error({ty:"State Callback Set",i:1,w:"Please provide a valid function for the callback to be executed on state changes."})},i.trigger=()=>{sdb.proc(r,"*")},[i,function e(l){let o=s;return l!==s&&(s=l,i.trigger(),n&&n({id:r,before:o})),s}]}function kY(e,s){let r=j.qsA(e,"*"),n=0,i=e=>n=e;[e,...r][t.fE](r=>{if("async-component"==j.tN(r))sAp(r,s,n,i,!0);else if("named-element"==j.tN(r)){let l=Elements,o=e=>r.attributes.getNamedItem(e);if(o("set"))l.set(o("set").value,cFg(r)),r.remove();else if(o("get")&&l.get(o("get").value)){let a=l.get(o("get").value);o("clone")&&(a=a.cloneNode(!0)),j.rpw(r,a)}else error({ty:"Named Element Get",i:1,w:'"'+o("get").value+'"Element name not specified.'})}else if(CM.has(j.tN(r))){sAp(r,s,n,i);return}else"a_"==j.tN(r)?(rT(r,s[n],"replace",e),n++):Array.from(r.attributes)[t.fE](i=>{let l=i.name;if(i.value==t.t){if("data"==l)is(s[n],"o")?(r[CDs]=HD(s[n]),j.ra(r,l)):error({i:3,ty:"Data Provider Set",w:"The data provider specified for the element must be an object."});else if("onsee"==l)is(s[n],"f")?setLazy(r,{callback:s[n],threshold:r[t.ga]("threshold")||0}):error({w:2,ty:"Intersection Callback Set",w:"You should define a callback function for Lazyload or any intersection event."}),j.ra(r,l);else if("on"==l.substring(0,2))"onconnect"==l||"onremove"==l?"onconnect"==l?L(1)(r,s[n]):L()(r,s[n]):on(r,l,s[n]),j.ra(r,l);else if("use"==l)is(s[n],"f")&&(s[n](r),j.ra(r,l));else if("sync"==l){sdb.rec(),s[n](r);let o=sdb.stop(),a={c:s[n],e:r,m:"s",parent:e,CC:0,data:{}};dA(a.data),sdb.prep(r,a,o,e),j.ra(r,l)}else if(is(s[n],"f")){sdb.rec();let c=s[n],f={m:"a",a:l,c:c,e:r,parent:e,CC:0,data:{}};dA(r,f.data);let u=c(f);r[t.sa](l,u||""),sdb.prep(r,f,sdb.stop(),e)}else r[t.sa](l,s[n]);n++}})})}function rT(e,s,r,n){let i=j.frg();if(isD(s))j.apc(i,s);else if(j.iA(s))s[t.fE](e=>{if(!is(e,"u")&&null!=e){let s;is(e,"s")||is(e,"n")?(s=j.dce("p")).textContent=e:isD(e)?s=e:j.iA(e)&&(s=j.frg(),j.apc(i,s),rT(s,e,t.apc,n)),j.apc(i,s)}});else if(is(s,"f")){if("AsyncFunction"===s[Symbol.toStringTag]){let l=j.dce("span");async function o(){var e=await s();isD(e)?j.rpw(l,e):j.rpw(l,j.ctN(e))}j.apc(i,l),o()}else{sdb.rec();let a={parent:n,c:s,m:"e",e:null,s:null,CC:0,data:{}};dA(e,a.data);let c=s(a),f,u;f=isD(c)?c:j.ctN(c!==t.U?c:"");let p=sdb.stop();j.iA(p)&&p.length?(u=f,a.e=u,sdb.prep(u,a,p)):(u=j.frg(),j.apc(u,f)),j.apc(i,u)}}else is(s,"o");"replace"==r?j.rpw(e,i):(r==t.apc||r===t.U)&&j.apc(e,i)}function setLazy(e,s){let r=new IntersectionObserver(n=>{n[t.fE](n=>{n.isIntersecting&&(s.callback(e),(is(s.once,"u")||s.once)&&(r.disconnect(),r=null))})},{threshold:s.threshold||0,...s});r.observe(e)}function pr(e){e[dS]&&e[dS](hS)[t.fE](e=>{if(1==e.CC){e.CC=0;return}sdb.prp(e)})}function d(e){e[dS]&&e[dS](hS)[t.fE](e=>{0==e.CC&&(e.CC=1)})}let ob=new MutationObserver(e=>{for(let s of e)if("childList"===s.type){let r=Array.from(s.addedNodes),n=Array.from(s.removedNodes);r[t.fE](e=>{let s=ctw(e);for(A.oc&&(sub(e,1),isD(e)&&j.qsA(e,"*")[t.fE](e=>{sub(e,1)})),sdb.sub(e),pr(e);s.nextNode();){let r=s.currentNode;sdb.sub(r),pr(r)}}),n[t.fE](e=>{let s=ctw(e);for(A.od&&(sub(e),isD(e)&&j.qsA(e,"*")[t.fE](e=>{sub(e)})),sdb.unsub(e),d(e);s.nextNode();)sdb.unsub(s.currentNode),d(s.currentNode)})}});ob.observe(document,{childList:!0,subtree:!0});let onRemove=L(),onConnect=L(1),Components=CM,setComponent=sC,createStore=S,createId=j.i;export{html,Mount,onConnect,onRemove,Components,setLazy,setComponent,createStore,createElement,async,createId,state};